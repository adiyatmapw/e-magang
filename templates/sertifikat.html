<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Sertifikat Magang</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Figtree:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Figtree', sans-serif;
      margin-bottom: 2rem;
    }
    .header-image {
      background: url('{{ url_for("static", filename="images/header3.png") }}') center center / cover no-repeat;
      height: 200px;
      opacity: 0.8;
      border-radius: 10px;
      margin-bottom: 30px;
    }
    .timeline {
      display: flex;
      justify-content: space-between;
      margin-bottom: 40px;
      list-style-type: none;
      padding: 0;
    }
    .timeline li {
      position: relative;
      text-align: center;
      flex: 1;
      cursor: default;
    }
    .timeline li::before {
      content: attr(data-step);
      width: 50px;
      height: 50px;
      line-height: 50px;
      border-radius: 50%;
      background-color: #EEEEEE;
      border: 2px solid #EEEEEE;
      display: block;
      margin: 0 auto 10px;
      color: #000000;
      font-weight: bold;
    }
    .timeline li.active::before {
      background-color: #6FDC5E;
      color: white;
      border: 2px solid #6FDC5E;
    }
    .timeline li::after {
      content: '';
      position: absolute;
      width: 100%;
      height: 4px;
      background-color: #EEEEEE;
      top: 20px;
      left: -50%;
      z-index: -1;
    }
    .timeline li:first-child::after {
      display: none;
    }
    .timeline li.active::after {
      background-color: #6FDC5E;
    }
    .sertifikat-box {
      text-align: center;
      border: 2px dashed #007bff;
      padding: 40px;
      border-radius: 10px;
      background-color: #f9f9f9;
      margin-bottom: 30px;
      color: #6c757d;
      font-size: 1.25rem;
    }
    .btn-cetak {
      background-color: #007bff;
      color: white;
      font-weight: bold;
      border-radius: 20px;
      width: 100%;
      max-width: 250px;
      padding: 10px;
    }
    .btn-cetak:hover {
      background-color: #0056b3;
      color: white;
    }
    iframe {
      width: 100%;
      height: 600px;
      border: none;
      border-radius: 10px;
      margin-bottom: 20px;
    }
    img.sertifikat-img {
      max-width: 100%;
      max-height: 600px;
      border-radius: 10px;
      margin-bottom: 20px;
    }
  </style>
</head>
<body>
  {% include 'navbar.html' %}
  <div class="container">
    <div class="header-image"></div>

    <ul class="timeline">
      <li class="active" data-step="1">Laporan Magang</li>
      <li class="active" data-step="2">Pengecekan Logbook</li>
      <li class="active" data-step="3">Revisi</li>
      <li class="active" data-step="4">Presentasi</li>
      <li class="active" data-step="5">Sertifikat</li>
    </ul>

    <h4>Sertifikat Magang</h4>
    <h5>Informasi Akun</h5>
    <div class="row mb-4">
      <div class="col-md-6">
        <label>Nama</label>
        <input class="form-control" value="{{ peserta.nama }}" readonly />
      </div>
      <div class="col-md-6">
        <label>Email</label>
        <input class="form-control" value="{{ peserta.user.email }}" readonly />
      </div>
        <div class="col-md-6 mt-3">
            <label>Tanggal Dimulai</label>
            <input class="form-control" value="{{ peserta.tanggal_dimulai.strftime('%d/%m/%Y') if peserta.tanggal_dimulai else '' }}" readonly />
        </div>
        <div class="col-md-6 mt-3">
            <label>Tanggal Berakhir</label>
            <input class="form-control" value="{{ peserta.tanggal_berakhir.strftime('%d/%m/%Y') if peserta.tanggal_berakhir else '' }}" readonly />
        </div>
    </div>

    {% if sertifikat and sertifikat.sertifikat_magang %}
      {% set ext = sertifikat.sertifikat_magang.rsplit('.', 1)[1].lower() %}
      {% if ext == 'pdf' %}
        <iframe src="{{ url_for('static', filename=sertifikat.sertifikat_magang.replace('\\','/')) }}"></iframe>
      {% else %}
        <img src="{{ url_for('static', filename=sertifikat.sertifikat_magang.replace('\\','/')) }}" alt="Sertifikat Magang" class="sertifikat-img" />
      {% endif %}
      <a href="{{ url_for('static', filename=sertifikat.sertifikat_magang.replace('\\','/')) }}" class="btn btn-primary btn-cetak" download>
        Cetak Sertifikat Magang
      </a>
    {% else %}
      <div class="sertifikat-box">
        <i class="bi bi-file-earmark-text"></i><br />
        Sertifikat Sedang Dalam Proses
      </div>
    {% endif %}
  </div>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>
</body>
</html>
